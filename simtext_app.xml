<tool id="simtext_app" name="simtext_app" tool_type="interactive" version="@VERSION@">
    <description>Interactive shiny app to explore SimText output data</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <entry_points>
        <entry_point name="SimText App" requires_domain="true">
            <port>8888</port>
        </entry_point>
    </entry_points>
    <expand macro="stdio"/>
    <command><![CDATA[Rscript 
      '${__tool_directory__}/simtext_app.R'
      --input '$input'
      --matrix '$matrix'
      --port '8888'
      ]]>
    </command>
    <inputs>
      <param argument="--input" label="Input file" name="input" optional="false" type="data" format="tabular" help="input"/>
      <param argument="--matrix" label="matrix file" name="matrix" optional="false" type="data" format="tabular" help="matrix"/>
    </inputs>
    <outputs>
      <data format="tabular" name="output" />
    </outputs>
    <tests><!-- cannot test interactive tools yet
        <test>
          <param name="input" value="test_data" ftype="tabular"/>
          <param name="matrix" value="text_to_wordmatrix_output"/>
        </test>-->
    </tests>
    <help><![CDATA[

The tool enables the exploration of data generated by text_to_wordmatrix or pmids_to_pubtator_matrix in a locally run ShinyApp. Features are word clouds for each initial search query, dimension reduction and hierarchical clustering of the binary matrix, and a table with words and their frequency among the search queries. 

Input:
1)	Input 1: 
Tab-delimited table with 
- column with search queries starting with "ID\_", e.g. "ID_gene" if initial search queries were genes
- column(s) with grouping factor(s) to compare pre-existing categories of the initial search queries with the grouping based on text. The column names should start with "GROUPING\_". If the column name is "GROUPING_disorder", "disorder" will be shown as a grouping variable in the app.
2)	Input 2: 
Output of text_to_wordmatrix or pmids_to_pubtator_matrix, or binary matrix.


        ]]></help>
    <expand macro="citations"/>
</tool>