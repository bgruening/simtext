<tool id="simtext_app" name="simtext_app" version="@VERSION@">
    <description>Interactive shiny app to explore SimText output data.</description>
    
    <requirements>
      <requirement type="package" version="2.0.1">r-argparse</requirement>
      <requirement type="package" version="0.3.3">r-pubmedwordcloud</requirement>
      <requirement type="package" version="1.4.0">r-stringr</requirement>
      <requirement type="package" version="1.3.2">r-shiny</requirement>
      <requirement type="package" version="4.9.2.1">r-plotly</requirement>
      <requirement type="package" version="0.13">r-dt</requirement>
      <requirement type="package" version="0.3">r-shinycssloaders</requirement>
      <requirement type="package" version="1.1.2">r-shinythemes</requirement>
      <requirement type="package" version="2.0.0">r-tablehtml</requirement>
      <requirement type="package" version="0.11.5">r-ggplot</requirement>
      <requirement type="package" version="0.8.3">r-tidyr</requirement>
      <requirement type="package" version="1.5">r-magrittr</requirement>
      <requirement type="package" version="1.8.4">r-plyr</requirement>
      <requirement type="package" version="0.3.0">r-ggpubr</requirement>
      <requirement type="package" version="1.0.0">r-rafalib</requirement>
      <requirement type="package" version="1.1_2">r-rcolorbrewer</requirement>
      <requirement type="package" version="1.13.4">r-dendextend</requirement>
      <requirement type="package" version="0.15">r-rtsne</requirement>
      <requirement type="package" version="0.2.5.0">r-umap</requirement>
      
    </requirements>
    
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>
    <command><![CDATA[Rscript 
      '${__tool_directory__}/simtext_app.R'
      --input '$input'
      --matrix '$matrix'
      --port '8888'
      ]]>
    </command>
    <inputs>
      <param argument="--input" label="Input file" name="input" optional="false" type="data" format="tabular" help="input"/>
      <param argument="--matrix" label="matrix file" name="matrix" optional="false" type="data" format="tabular" help="matrix"/>
    </inputs>
    <outputs>
      <data format="tabular" name="output" />
    </outputs>
    <tests>
        <test>
          <param name="input" value="test_data" ftype="tabular"/>
          <param name="matrix" value="text_to_wordmatrix_output" ftype="tabular"/>
        </test>
    </tests>
    <help><![CDATA[

The tool enables the exploration of data generated by text_to_wordmatrix or pmids_to_pubtator_matrix in a locally run ShinyApp. Features are word clouds for each initial search query, dimension reduction and hierarchical clustering of the binary matrix, and a table with words and their frequency among the search queries. 

Input:
1)	Input 1: 
Tab-delimited table with 
- column with search queries starting with "ID_", e.g. "ID_gene" if initial search queries were genes 
- column(s) with grouping factor(s) to compare pre-existing categories of the initial search queries with the grouping based on text. The column names should start with "GROUPING_". If the column name is "GROUPING_disorder", "disorder" will be shown as a grouping variable in the app.
2)	Input 2: 
Output of text_to_wordmatrix or pmids_to_pubtator_matrix, or binary matrix.


        ]]></help>
</tool>