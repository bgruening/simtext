<tool id="t5_simtext_app" name="T5_simtext_app" version="@VERSION@">
    <description>Interactive shiny app to explore SimText output data.</description>
    
    <requirements>
      <requirement type="package" version="2.0.1">r-argparse</requirement>
      <requirement type="package" version="0.3.3">r-pubmedwordcloud</requirement>
      <requirement type="package" version="1.4.0">r-stringr</requirement>
      <requirement type="package" version="1.3.2">r-shiny</requirement>
      <requirement type="package" version="4.9.2.1">r-plotly</requirement>
      <requirement type="package" version="0.13">r-dt</requirement>
      <requirement type="package" version="0.3">r-shinycssloaders</requirement>
      <requirement type="package" version="1.1.2">r-shinythemes</requirement>
      <requirement type="package" version="2.0.0">r-tablehtml</requirement>
      <requirement type="package" version="0.11.5">r-ggplot</requirement>
      <requirement type="package" version="0.8.3">r-tidyr</requirement>
      <requirement type="package" version="1.5">r-magrittr</requirement>
      <requirement type="package" version="1.8.4">r-plyr</requirement>
      <requirement type="package" version="0.3.0">r-ggpubr</requirement>
      <requirement type="package" version="1.0.0">r-rafalib</requirement>
      <requirement type="package" version="1.1_2">r-rcolorbrewer</requirement>
      <requirement type="package" version="1.13.4">r-dendextend</requirement>
      <requirement type="package" version="0.15">r-rtsne</requirement>
      <requirement type="package" version="0.2.5.0">r-umap</requirement>
      
    </requirements>
    
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="stdio"/>
    <command><![CDATA[Rscript 
      '${__tool_directory__}/T5_simtext_app.R'
      --input '$input'
      --matrix '$matrix'
      --port '8888'
      ]]>
    </command>
    <inputs>
      <param argument="--input" label="Input file" name="input" optional="false" type="data" format="tabular" help="input"/>
      <param argument="--matrix" label="matrix file" name="matrix" optional="false" type="data" format="tabular" help="matrix"/>
    </inputs>
    <outputs>
      <data format="tabular" name="output" />
    </outputs>
    <tests>
        <test>
          <param name="input" value="test_data" ftype="tabular"/>
          <param name="matrix" value="T3_output" ftype="tabular"/>
        </test>
    </tests>
    <help><![CDATA[
Shiny app with word clouds, dimensionality reduction plot, dendrogram of hierarchical clustering and table of words and their frequency among the entities.

Input: 
1) Table with entities in column called “ID_<name>”, e.g. “ID_genes” if entities are genes, 
   and column(s) with grouping factor, eg. column containing information to which diseases the genes are associated with. 
   The names of grouping columns should start with “GROUPING_”. If the column is called “GROUPING_Disease”, the app will show “Disease” as a grouping variable.
2) A binary matrix as table with rows = entities and columns = words (or output of T3_text_to_wordmatrix or T4_pmids_to_pubtator_matrix).

        ]]></help>
</tool>